---
title: 'Dimensionality reduction using <i class="fab fa-python"></i> Python'
subtitle: '&emsp;'
author: "Kevin Rue-Albrecht"
institute: "Oxford Biomedical Data Science Training Programme"
date: "2021-05-10 (updated: `r Sys.Date()`)"
output:
  xaringan::moon_reader:
    css: [default, metropolis, rladies-fonts, "my-theme.css"]
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
# uncomment this line to produce HTML and PDF in RStudio:
knit: pagedown::chrome_print
---

layout: true

<div class="my-header"><img src="img/ox_brand1_pos.gif" alt="Oxford University Logo" align="right" height="90%"></div>

<div class="my-footer"><span>
Kevin Rue-Albrecht
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
Dimensionality reduction using <i class="fab fa-python"></i> Python
</span></div> 

```{r setup, include = FALSE}
stopifnot(requireNamespace("htmltools"))
htmltools::tagList(rmarkdown::html_dependency_font_awesome())
knitr::opts_chunk$set(
  message = FALSE, warning = FALSE, error = FALSE, include = TRUE, echo = FALSE,
  fig.align='center', out.height='500px'
)
options(width = 90)
stopifnot(require(base))
```

```{r, load_refs, include=FALSE, cache=FALSE}
options(htmltools.dir.version = FALSE)
library(RefManageR)
BibOptions(
  check.entries = FALSE,
  bib.style = "authoryear",
  cite.style = "authoryear",
  style = "markdown",
  hyperlink = "to.doc",
  dashed = TRUE)
bib <- ReadBib("bibliography.bib")
```

---

# Learning Objectives & Goals

## Learning Goals

- Understand what dimensionality reduction is.
- Describe when and how to use it.

## Objectives

- Apply various dimensionality reduction methods to a data set.
- Visualise the output of dimensionality reduction.

---

# Pre-requisites

.x-large-list[
- Access to the CCB cluster and the shared data folder.

- A working installation of <i class="fab fa-git"></i>.

- A clone of the shared <i class="fab fa-github"></i> GitHub repository for this course.

- A working installation of [Miniconda](https://docs.conda.io/en/latest/index.html).
]

---

# Credits

.center[
<i class="fab fa-github"></i> <https://github.com/mGalarnyk/Python_Tutorials>

Paul Brodersen
]

---

# What is dimensionality reduction?

.pull-left[
```{r}
x_nrow <- 10
x <- data.frame(
  V1 = rep(".", 10),
  V2 = rep(".", 10),
  V3 = rep(".", 10),
  V4 = rep(".", 10),
  V5 = rep(".", 10),
  V6 = rep(".", 10),
  row.names = paste0("sample", 1:x_nrow))
knitr::kable(x)
```
]

.pull-left[
```{r}
x_nrow <- 10
x <- data.frame(
  D1 = rep(".", 10),
  D2 = rep(".", 10),
  D3 = rep(".", 10),
  row.names = paste0("sample", 1:x_nrow))
knitr::kable(x)
```
]

---

# Why and when should you use dimensionality reduction?

```{r, echo=FALSE, out.height='400px'}
# Source: https://medium.com/analytics-vidhya/locally-linear-embedding-lle-data-mining-b956616d24e9
knitr::include_graphics("img/swiss_roll.png")
```

.center[
1. Visualisation
2. Interpretation
3. Compression
]

---

# How can we reduce dimensions?

## Method 1: Principal components analysis

```{r, echo=FALSE, out.height='400px'}
# Source: https://towardsdatascience.com/pca-clearly-explained-how-when-why-to-use-it-and-feature-importance-a-guide-in-python-7c274582c37e
knitr::include_graphics("img/pca.jpeg")
```

---

# Set up

Use `conda.yml` to create a Conda environment for this exercise.

```{bash, echo=TRUE, eval=FALSE}
conda create --name obds-py-dimred --file conda.yml
```

Activate the environment.

```{bash, echo=TRUE, eval=FALSE}
conda activate obds-py-dimred
```

Launch JupyterLab.

```{bash, echo=TRUE, eval=FALSE}
jupyter lab
```

Navigate to the sub-directory for today, and create a new notebook with your name,
e.g. `kevinrue.ipynb`.

---

# Download the data set

Import the `pandas` package as `pd`.

> That's a whole _four_ characters fewer to type!
> i.e., `pd.read_csv` instead of `pandas.read_csv`.

Use the function `read_csv` (in the `pandas` package) to import data from the file `iris.data`.

---

# To do

- Choose a data set.
- Identify packages that we will use.
  + Dimensionality reduction (e.g., PCA, UMAP, t-SNE).
  + Visualisation.

David asked to use `pandas`, not `numpy`.

- Clarify how we will use python on the cluster.

---

# Further reading

## Novice

- One

## Advanced

- One

---

# References

```{r refs, results="asis"}
PrintBibliography(bib)
```

???

Extras:

- Install `git`
- `git init` (as opposed to `git clone`)
- `git merge` vs `git rebase`
